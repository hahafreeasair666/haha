# 新闻及评论相关接口

## 1评论或回复

### url:
/haha/news/api/addComment/v1

### HTTP请求方式
post

### 输入参数说明
| key | type | description |
| :--: | :--: | :--: |
| newsId | int | 新闻id |
| commentId | string | 评论id |
| content | String | 内容（必传） |
### ps:newsId与commentId不能同时为空必传其中一个

### 返回结果
```````````
//失败
{
    "code": 5000,
    "msg": "error",
    "userMsg": "请传入要评论的文章或回复的评论",
    "data": null
}
//成功
{
    "code": 0,
    "msg": "",
    "userMsg": "",
    "data": null
}
```````````

## 2点赞评论或点赞回复

### url：
/haha/news/api/addCommentZan/v1

### HTTP请求方式
post

### 输入参数说明
| key | type | description |
| :--: | :--: | :--: |
| commentId | String | 评论或回复的id（必传） |

### 返回结果
````
//未登录
{
    "code": 5000,
    "msg": "unLogin",
    "userMsg": "请登录后再进行操作",
    "data": null
}
//未传参
{
    "code": 5000,
    "msg": "error",
    "userMsg": "请传入要点赞的评论id",
    "data": null
}
//成功
{
    "code": 0,
    "msg": "",
    "userMsg": "",
    "data": null
}
//重复点赞
{
    "code": 5000,
    "msg": "error",
    "userMsg": "您已点过赞了",
    "data": null
}

````
## 3获取评论列表

### url：
/haha/news/api/getNewsComment/v1

### HTTP请求方式
get

### 输入参数说明
| key | type | description |
| :--: | :--: | :--: |
| newsId | int | 新闻id（必传） |
| page | int | 当前页（不必传，默认1，但是下一页就要传了） |
| size | int | 每页评论数量（不必传，默认5） |

#### 返回结果
```
//无评论或者文章id错误
{
    "code": 0,
    "msg": "success",
    "userMsg": "暂无评论",
    "data": null
}
//成功
{
    "code": 0,
    "msg": "",
    "userMsg": "",
    "data": {
        "totalPage": 1,//总页码
        "currentPage": 1,//当前页
        "commentList": [
            {
                "id": "6ba649f83b5642b9aa38db3aebfdcd7c",
                "newsId": 1,
                "userId": 2,
                "userName": "测试",
                "avatar": "https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2376638784,1470858270&fm=27&gp=0.jpg",//头像
                "zan": 1,
                "isPraised": false,//当前登录用户是否点赞过此评论
                "content": "第二条评论测试",//内容
                "createTime": "2018-03-01 13:51:26",
                "replies": [//回复列表，只显示此评论下点赞量最高的三条回复
                    {
                        "replyId": "8f0ee19b92b14808af8b46e057e7d95e",
                        "replyUserId": 2,
                        "replyUserName": "测试",
                        "replyUserAvatar": "https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2376638784,1470858270&fm=27&gp=0.jpg",
                        "toUserId": 2,
                        "toUserName": "测试",//回复谁
                        "content": "社会社会",
                        "zan": 0,
                        "isPraised": false,
                        "createTime": "2018-03-01 18:02:33"
                    },
                    {
                        "replyId": "de5646db42a24c398a381a51140ce0aa",
                        "replyUserId": 2,
                        "replyUserName": "测试",
                        "replyUserAvatar": "https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2376638784,1470858270&fm=27&gp=0.jpg",
                        "toUserId": 2,
                        "toUserName": "测试",
                        "content": "哦？",
                        "zan": 0,
                        "isPraised": false,
                        "createTime": "2018-03-02 16:07:10"
                    }
                ]
            },
            {
                "id": "7983bb38118b4a54bc8b32ea8d2d5d4a",
                "newsId": 1,
                "userId": 1,
                "userName": "大头",
                "avatar": "https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2376638784,1470858270&fm=27&gp=0.jpg",
                "zan": 0,
                "isPraised": false,
                "content": "第一条评论测试",
                "createTime": "2018-03-01 13:42:19",
                "replies": [
                    {
                        "replyId": "1df64b453b3944c281182fc5d863ba83",
                        "replyUserId": 1,
                        "replyUserName": "大头",
                        "replyUserAvatar": "https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2376638784,1470858270&fm=27&gp=0.jpg",
                        "toUserId": 1,
                        "toUserName": "大头",
                        "content": "第一条回复测试",
                        "zan": 2,
                        "isPraised": false,
                        "createTime": "2018-03-01 13:43:28"
                    },
                    {
                        "replyId": "d05d5c095bb4485bae3a0a9d267f99d8",
                        "replyUserId": 2,
                        "replyUserName": "测试",
                        "replyUserAvatar": "https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2376638784,1470858270&fm=27&gp=0.jpg",
                        "toUserId": 1,
                        "toUserName": "大头",
                        "content": "第二条回复测试",
                        "zan": 0,
                        "isPraised": false,
                        "createTime": "2018-03-01 13:44:49"
                    },
                    {
                        "replyId": "230848e185fc4209a31ef07ee3968805",
                        "replyUserId": 2,
                        "replyUserName": "测试",
                        "replyUserAvatar": "https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2376638784,1470858270&fm=27&gp=0.jpg",
                        "toUserId": 1,
                        "toUserName": "大头",
                        "content": "第二条回复的回复测试",
                        "zan": 1,
                        "isPraised": false,
                        "createTime": "2018-03-01 13:47:52"
                    }
                ]
            }
        ]
    }
}
```

## 4回复列表

### url：
/haha/news/api/getCommentReply/v1

### HTTP请求方式
get

### 输入参数说明
| key | type | description |
| :--: | :--: | :--: |
| commentId | String | 评论id（必传） |
| page | int | 当前页（不必传，默认1，但是下一页就要传了） |
| size | int | 每页回复数量（不必传，默认5） |

#### 返回结果
```
//未传参
{
    "code": 2001,
    "msg": "error",
    "userMsg": "请传入评论id",
    "data": null
}
//评论不存在
{
    "code": 5000,
    "msg": "error",
    "userMsg": "该评论不存在或已删除",
    "data": null
}
//成功
{
    "code": 0,
    "msg": "",
    "userMsg": "",
    "data": {
        "totalPage": 1,
        "currentPage": 1,
        "newsCommentAndReply": {
            "id": "7983bb38118b4a54bc8b32ea8d2d5d4a",
            "newsId": 1,
            "userId": 1,
            "userName": "大头",
            "avatar": "https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2376638784,1470858270&fm=27&gp=0.jpg",
            "zan": 0,
            "isPraised": false,
            "content": "第一条评论测试",
            "createTime": "2018-03-01 13:42:19",
            "replies": [
                {
                    "replyId": "1df64b453b3944c281182fc5d863ba83",
                    "replyUserId": 1,
                    "replyUserName": "大头",
                    "replyUserAvatar": "https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2376638784,1470858270&fm=27&gp=0.jpg",
                    "toUserId": 1,
                    "toUserName": "大头",
                    "content": "第一条回复测试",
                    "zan": 2,
                    "isPraised": true,
                    "createTime": "2018-03-01 13:43:28"
                },
                {
                    "replyId": "230848e185fc4209a31ef07ee3968805",
                    "replyUserId": 2,
                    "replyUserName": "测试",
                    "replyUserAvatar": "https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2376638784,1470858270&fm=27&gp=0.jpg",
                    "toUserId": 1,
                    "toUserName": "大头",
                    "content": "第二条回复的回复测试",
                    "zan": 1,
                    "isPraised": true,
                    "createTime": "2018-03-01 13:47:52"
                },
                {
                    "replyId": "d05d5c095bb4485bae3a0a9d267f99d8",
                    "replyUserId": 2,
                    "replyUserName": "测试",
                    "replyUserAvatar": "https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2376638784,1470858270&fm=27&gp=0.jpg",
                    "toUserId": 1,
                    "toUserName": "大头",
                    "content": "第二条回复测试",
                    "zan": 0,
                    "isPraised": false,
                    "createTime": "2018-03-01 13:44:49"
                }
            ]
        }
    }
}
```
## 5发布公告
### url：
/haha/news/api/addNews/v1
### HTTP请求方式
post
### 输入参数说明
| key | type | description |
| :--: | :--: | :--: |
| title | String | 公告标题（必传） |
| body | String | 公告内容（必传） |
| pic | String | 公告的配图，图片上传后的id多张用英文逗号分隔（必传） |
| animalType | int | 动物种类 狗1 猫2（必传） |
| dogOrCatType | int | 具体猫狗种类id（必传） 为下拉框选择的接口见猫狗资料.md文件里|
| isAdoptionNews | boolean | 是否是领养公告（必传） |
#### 返回结果
```
//成功
{
    "code": 0,
    "msg": "",
    "userMsg": "",
    "data": null
}
//未登录不可以发布
{
    "code": 5000,
    "msg": "error",
    "userMsg": "请登录后再操作",
    "data": null
}
```
## 6查看公告详情
### url：
/haha/news/api/getNewsDetailById/v1
### HTTP请求方式
get
### 输入参数说明
| key | type | description |
| :--: | :--: | :--: |
| id | int | 公告id（必传） |
#### 返回结果
```
//成功
{
    "code": 0,
    "msg": "",
    "userMsg": "",
    "data": {
        "title": "流浪狗求领养",//公告标题
        "body": "这是一条测试的新闻内容，流浪哈士奇求领养流浪二哈求领养，求好心人领养",//公告内容
        "isAdoptionNews": true,//是否是领养信息
        "id": 7,//公告id
        "userName": "大头",//发布者名称
        "createTime": "2018-03-08 09:13:57",//发布时间
        "createPlace": "未知",//发布地点，根据ip定位的
        "type": "狗",//动物分类
        "animalName": "哈士奇",//动物具体分类
        "zan": 0,//被赞的次数
        "isPraised": false,//当前登录人是否对其点过赞
        "picMap": [//公告配图数组
            "120.79.160.214:9080/3,089463e379",
            "120.79.160.214:9080/7,0ef35d01e0",
            "120.79.160.214:9080/7,0f6b7c44b5",
            "120.79.160.214:9080/7,10f99d6d51"
        ]
    }
}
//id输入错误
{
    "code": 5000,
    "msg": "error",
    "userMsg": "该新闻不存在或已被作者删除",
    "data": null
}
```
## 7点赞公告
### url：
/haha/news/api/addNewsZan/v1
### HTTP请求方式
post
### 输入参数说明
| key | type | description |
| :--: | :--: | :--: |
| id | int | 公告id（必传） |
#### 返回结果
```
//未登录
{
    "code": 5000,
    "msg": "unLogin",
    "userMsg": "请登录后再进行操作",
    "data": null
}
//成功
{
    "code": 0,
    "msg": "",
    "userMsg": "",
    "data": null
}
```
## 8获取公告列表
### url：
/haha/news/api/getNewsList/v1
### HTTP请求方式
get
### 输入参数说明
| key | type | description |
| :--: | :--: | :--: |
| type | int | 狗1猫2（筛选条件不必传） |
| specificTypes | int | 具体猫狗的id（筛选条件不必传）做一个下拉框可选择，接口同添加公告的猫狗具体种类 |
| isAdoptionNews | boolean | 是否是领养信息（筛选条件不必传） |
| size | int | 每页显示的条数（不必传默认10） |
| current | int | 当前页（默认） |第一页
#### 返回结果
```
//成功
{
    "code": 0,
    "msg": "",
    "userMsg": "",
    "data": {
        "totalPage": 2,//总页数
        "currentPage": 1,//当前页
        "list": [//公告列表
            {
                "id": 1,//公告id
                "title": null,//公告标题
                "imgPath": null,//公告展示的图片路径
                "createTime": null,//发布时间
                "createUser": "大头",//作者
                "place": null//发布地点
            },
            {
                "id": 2,
                "title": null,
                "imgPath": null,
                "createTime": null,
                "createUser": "大头",
                "place": null
            },
            {
                "id": 3,
                "title": null,
                "imgPath": null,
                "createTime": null,
                "createUser": "测试",
                "place": null
            },
            {
                "id": 7,
                "title": "流浪狗求领养",
                "imgPath": "120.79.160.214:9080/3,089463e379",
                "createTime": "2018-03-08 09:13:57",
                "createUser": "大头",
                "place": "未知"
            },
            {
                "id": 8,
                "title": "流浪猫求领养",
                "imgPath": null,
                "createTime": "2018-03-08 09:25:10",
                "createUser": "大头",
                "place": "未知"
            }
        ]
    }
}
```

